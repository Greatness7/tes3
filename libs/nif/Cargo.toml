[package]
name = "nif"
version.workspace = true
authors.workspace = true
edition.workspace = true
repository.workspace = true
license.workspace = true

[dependencies]
bstr = { version = "^1.4", default-features = false, features = ["std"] }
bytes_io = { path = "../bytes_io", features = ["nalgebra"] }
derive_more = "^0.99"
float_eq = "^1.0"
hashbrown = { version = ">=0.12, <1.0" }
nalgebra = { version = "^0.32", features = ["convert-bytemuck"] }
nif_macros = { path = "../nif_macros" }
serde = { version = "^1.0", features = ["derive"], optional = true }
serde_with = { version = "^2.3", optional = true }
slotmap = "^1.0"
smart-default = "^0.6"

[dev-dependencies]
tempfile = "^3.5"
test-case = "^3.1"

[features]
default = []
nightly = ["bytes_io/nightly", "hashbrown/nightly"]
serde = ["dep:serde", "dep:serde_with", "hashbrown/serde", "nalgebra/serde"]
simd = ["bytes_io/simd"]
